<!-- players -->
<app-player-section class="player-section" [game]="game" [firestore]="firestore" [gameId]="gameId"></app-player-section>
<div *ngIf="game.gameOver" class="game-over">
    <img src="assets/img/brass-sign.png" alt="">
    <span>Game Over</span>
</div>

<!-- cards -->
<div class="table background">
    <div class="card-circle">
        <div *ngFor="let card of game.stack;let i = index;" (click)="takeCard(i)" class="card"
            [ngClass]="{'distribute-card':game.distribute, 'taking-card':game.currentFace == card.face && !game.isTaken[i] ,'card-taken':game.isTaken[i]}"
            [style.--animation-delay]="i * 50 + 'ms'" [style.--orgDegrees]="card.orgDegrees+ 'deg'"
            [style.--level]="game.playedIndices.indexOf(i)" [style.--degrees]="card.degrees+'deg'"
            [style.--XOffset]="card.XOffset+'px'" [style.--YOffset]="card.YOffset+'px'">
            <div class="card-back">
                <img src="assets/img/cards/card_cover_red.png">
            </div>
            <div class="card-front">
                <img src="assets/img/cards/{{ card.face }}.png">
            </div>
        </div>
    </div>


    <!-- instructions and buttons -->
    <div class="pin-bottom" [class.hidden]="actionTextHidden">

        <app-action-text class="action-text"  [card]="game.currentFace"
            [players]="game.players" [gameOver]="game.gameOver" (click)="toggleHide()"> </app-action-text>

        <div class="btn-group">
            <!-- big buttons for high screens -->
            <div class="hide-low-screen">
                <button mat-fab color="basic" (click)="addDialog()" matTooltip="add a player">
                    <mat-icon>person_add</mat-icon>
                </button>
                <button mat-fab color="basic" (click)="shareDialog()" matTooltip="share game">
                    <mat-icon>share</mat-icon>
                </button>
                <button mat-fab color="basic" (click)="reset()" matTooltip="start new game">
                    <mat-icon>refresh</mat-icon>
                </button>
                <button mat-fab color="basic" [matMenuTriggerFor]="menu" matTooltip="show menu">
                    <mat-icon>menu</mat-icon>
                </button>
            </div>

            <!-- small buttons for low screens -->
            <div class="hide-high-screen">
                <button mat-mini-fab color="basic" (click)="addDialog()" matTooltip="add a player">
                    <mat-icon>person_add</mat-icon>
                </button>
                <button mat-mini-fab color="basic" (click)="shareDialog()" matTooltip="share game">
                    <mat-icon>share</mat-icon>
                </button>
                <button mat-mini-fab color="basic" (click)="reset()" matTooltip="start new game">
                    <mat-icon>refresh</mat-icon>
                </button>
                <button mat-mini-fab color="basic" [matMenuTriggerFor]="menu" matTooltip="show menu">
                    <mat-icon>menu</mat-icon>
                </button>
            </div>


            <mat-menu #menu="matMenu">
                <a mat-menu-item routerLink="/imprint">
                    <span>Imprint</span>
                </a>
                <a mat-menu-item routerLink="/privacy">
                    <span>Privacy</span>
                </a>
            </mat-menu>

        </div>
    </div>

</div>